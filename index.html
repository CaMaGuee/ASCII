<!doctype html>
<html lang="ko">
<head>
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#317EFB">
<link rel="icon" type="image/png" href="favicon.png?v=2">
<link rel="icon" type="image/x-icon" href="favicon.ico?v=2">
<link rel="apple-touch-icon" href="favicon.png?v=2">
<link rel="shortcut icon" href="favicon.ico?v=2">
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ASCII 코드 변환기</title>
<style>
  :root{
    --bg:#f4f6f8;
    --card:#ffffff;
    --accent:#2563eb;
    --muted:#6b7280;
    --shadow: 0 6px 20px rgba(16,24,40,0.06);
    font-family: Inter, "Segoe UI", Roboto, "Noto Sans KR", system-ui, -apple-system, "Helvetica Neue", Arial;
  }
  body{
    margin:0;
    background:linear-gradient(180deg,var(--bg),#eef2f7);
    min-height:100vh;
    display:flex;
    align-items:flex-start;
    justify-content:center;
    padding:36px;
    color:#111827;
  }
  .container{
    width:1100px;
    max-width:95%;
    display:grid;
    grid-template-columns:480px 1fr;
    gap:20px;
    align-items:start;
  }

  /* 왼쪽: 간단한 ASCII 테이블 및 정보 */
  .left{
    height: 650px;
    background:var(--card);
    border-radius:12px;
    padding:18px;
    box-shadow:var(--shadow);
    display:flex;
    flex-direction:column;
    gap:12px;
  }
  .left h3{margin:0;font-size:16px}
  .ascii-table{
    overflow:auto;
    border-radius:8px;
    border:1px solid #e6eef8;
  }
  table{border-collapse:collapse;width:100%;font-size:13px}
  th,td{padding:6px 8px;border-bottom:1px solid #f1f5f9;text-align:left}
  thead th{background:#f8fafc;color:var(--muted);font-weight:600;font-size:12px}
  tbody tr:hover{background:#fbfdff}
  .note{font-size:13px;color:var(--muted)}
  .small{font-size:12px;color:var(--muted)}

  /* 오른쪽: 변환기 */
  .right{
    display:flex;
    flex-direction:column;
    gap:14px;
  }
  .card{
    background:var(--card);
    padding:16px;
    border-radius:12px;
    box-shadow:var(--shadow);
  }
  .row{
    display:flex;
    gap:10px;
    align-items:center;
    flex-wrap:wrap;
  }
  label{font-size:13px;color:var(--muted)}
  input[type="text"], textarea, select {
    width:100%;
    padding:10px 12px;
    border-radius:8px;
    border:1px solid #e6eef8;
    font-size:14px;
    box-sizing:border-box;
    background:transparent;
    resize:vertical;
  }
  textarea{min-height:84px; max-height:280px}
  .controls{display:flex;gap:8px;align-items:center}
  .btn{
    background:var(--accent);
    color:#fff;
    border:none;
    padding:10px 14px;
    border-radius:10px;
    cursor:pointer;
    font-weight:600;
  }
  .btn.secondary{
    background:#fff;color:var(--accent);border:1px solid #dbeafe;font-weight:600;
  }
  .inline-radio{display:flex;gap:8px;align-items:center;margin-left:6px}
  .output{
    background:#f8fafc;border:1px dashed #e6eef8;padding:12px;border-radius:8px;min-height:64px;
    white-space:pre-wrap; word-break:break-word; font-family:monospace;
  }
  .meta{display:flex;gap:8px;align-items:center;justify-content:space-between}
  .error{color:#b91c1c;font-weight:600}

  /* responsive */
  @media (max-width:900px){
    .container{grid-template-columns:1fr; width:98%;}
  }
</style>
</head>
<body>
  <div class="container">
    <!-- LEFT: ASCII TABLE -->
    <div class="left card">
      <h3>간단한 ASCII 참조표 (0–127)</h3>
      <div class="ascii-table" aria-hidden="true">
        <table id="asciiTable">
          <thead><tr><th>DEC</th><th>HEX</th><th>OCT</th><th>문자</th><th>설명</th><th>비고</th></th></tr></thead>
          <tbody>
            <!-- JS에서 채웁니다 -->
          </tbody>
        </table>
      </div>
      <div class="note">문자 → 코드 변환: 입력란에 텍스트 입력 후 변환 버튼을 누르세요.<br>코드 → 문자 변환: 코드들을 띄어쓰기, 콤마, 혹은 줄바꿈으로 구분해 입력하세요.</div>
      <div class="small">참고: ASCII는 0~127 범위. 입력 코드가 범위를 벗어나면 에러가 납니다.</div>
    </div>

    <!-- RIGHT: CONVERTER -->
    <div class="right">
      <!-- 문자를 코드로 -->
      <div class="card" id="textToCodeCard">
        <div class="row" style="justify-content:space-between;align-items:flex-start">
          <div style="flex:1 1 60%">
            <label for="textIn"><strong>문자 입력 (텍스트 → 코드)</strong></label>
            <textarea id="textIn" placeholder="여기에 변환할 문자를 입력하세요. 예: Hello!"></textarea>
          </div>
          <div style="width:180px">
            <label><strong>출력 포맷</strong></label>
            <div style="margin-top:6px">
              <select id="formatSelect">
                <option value="DEC">DEC (십진수)</option>
                <option value="HEX" selected>HEX (16진수)</option>
                <option value="OCT">OCT (8진수)</option>
              </select>
            </div>
            <div style="margin-top:10px">
              <label class="small">구분자</label>
              <select id="sepSelect">
                <option value="space">공백</option>
                <option value="comma">콤마(,)</option>
                <option value="hyphen">하이픈(-)</option>
                <option value="newline">줄바꿈</option>
              </select>
            </div>
          </div>
        </div>

        <div class="row" style="margin-top:12px;justify-content:flex-start">
          <button class="btn" id="convertTextBtn">변환 →</button>
          <button class="btn secondary" id="copyCodeBtn">코드 복사</button>
          <div class="meta" style="flex:1">
            <div id="textToCodeInfo" class="small" style="margin-left:12px"></div>
            <div id="textToCodeError" class="error" role="alert"></div>
          </div>
        </div>

        <div style="margin-top:12px">
          <label><strong>변환된 ASCII 코드</strong></label>
          <div id="codeOut" class="output" aria-live="polite"></div>
        </div>
      </div>

      <!-- 코드를 문자로 -->
      <div class="card" id="codeToTextCard">
        <div class="row" style="justify-content:space-between">
          <div style="flex:1 1 60%">
            <label for="codeIn"><strong>코드 입력 (코드 → 문자)</strong></label>
            <textarea id="codeIn" placeholder="예: 48 65 6C 6C 6F (HEX) 또는 72,101,108,108,111 (DEC)"></textarea>
          </div>
          <div style="width:200px">
            <label><strong>입력 포맷</strong></label>
            <div style="margin-top:6px">
              <select id="inputFormat">
                <option value="HEX">HEX (16진수)</option>
                <option value="DEC">DEC (십진수)</option>
                <option value="OCT">OCT (8진수)</option>
              </select>
            </div>
          </div>
        </div>

        <div class="row" style="margin-top:12px">
          <button class="btn" id="convertCodeBtn">변환 →</button>
          <button class="btn secondary" id="copyTextBtn">문자 복사</button>
          <div class="meta" style="flex:1">
            <div id="codeToTextInfo" class="small" style="margin-left:12px"></div>
            <div id="codeToTextError" class="error" role="alert"></div>
          </div>
        </div>

        <div style="margin-top:12px">
          <label><strong>변환된 문자</strong></label>
          <div id="textOut" class="output" aria-live="polite"></div>
        </div>
      </div>
    </div>
  </div>

<script>

// 기본 ASCII 설명 (간단)
const controlNames = {
  0:'NUL',
  1:'SOH',
  2:'STX',
  3:'ETX',
  4:'EOT',
  5:'ENQ',
  6:'ACK',
  7:'BEL',
  8:'BS',
  9:'HT',
  10:'LF',
  11:'VT',
  12:'FF',
  13:'CR',
  14:'SO',
  15:'SI',
  16:'DLE',
  17:'DC1',
  18:'DC2',
  19:'DC3',
  20:'DC4',
  21:'NAK',
  22:'SYN',
  23:'ETB',
  24:'CAN',
  25:'EM',
  26:'SUB',
  27:'ESC',
  28:'FS',
  29:'GS',
  30:'RS',
  31:'US',
  127:'DEL'
};
const DesNames = {
  0:'Null 문자',
  1:'Start of Header',
  2:'Start of Text',
  3:'End of Text',
  4:'End of Transmission',
  5:'Enquiry',
  6:'Acknowledge',
  7:'Bell, 경고음',
  8:'Backspace, 한 칸 뒤로',
  9:'Horizontal Tab, 탭',
  10:'Line Feed, 줄바꿈',
  11:'Vertical Tab',
  12:'Form Feed',
  13:'Carriage Return, 커서를 맨 앞으로',
  14:'Shift Out',
  15:'Shift In',
  16:'Data Link Escape',
  17:'Device Control 1',
  18:'Device Control 2',
  19:'Device Control 3',
  20:'Device Control 4',
  21:'Negative Acknowledge',
  22:'Synchronous Idle',
  23:'End of Transmission Block',
  24:'Cancel',
  25:'End of Medium',
  26:'Substitute',
  27:'Escape',
  28:'File Separator',
  29:'Group Separator',
  30:'Record Separator',
  31:'Unit Separator',
  127:'Delete'
};

// 채우기: ASCII 테이블 (0..127)
(function buildAsciiTable(){
  const tbody = document.querySelector('#asciiTable tbody');
  let html = '';
  for(let i=0;i<128;i++){
    const ch = (i>=32 && i<=126) ? String.fromCharCode(i) : '';
    const desc = controlNames[i] || ( (i>=32 && i<=126) ? '' : '');
    const hex = i.toString(16).toUpperCase().padStart(2,'0');
    const oct = i.toString(8).padStart(3,'0');
    const desc2 = DesNames[i] || ( (i>32 && i <=126) ? '' : '');
    html += '<tr><td>'+i+'</td><td>'+hex+'</td><td>'+oct+'</td><td>'+ (ch || '&nbsp;') +'</td><td>'+desc+'</td><td>'+desc2+'</td></tr>';
  }
  tbody.innerHTML = html;
})();

// 헬퍼: 숫자 포맷팅
function formatNum(n,fmt){
  if(fmt==='DEC') return String(n);
  if(fmt==='HEX') return n.toString(16).toUpperCase().padStart(2,'0');
  if(fmt==='OCT') return n.toString(8).padStart(3,'0');
  return String(n);
}

// 헬퍼: 파싱 (코드 문자열 -> 숫자)
function parseTokenToNumber(tok, fmt){
  tok = tok.trim();
  if(tok==='') return null;
  // allow 0x prefix for hex, 0o for octal, but primary parse based on fmt
  if(fmt==='HEX'){
    // remove possible 0x
    if(tok.toLowerCase().startsWith('0x')) tok = tok.slice(2);
    const v = parseInt(tok,16);
    return Number.isNaN(v) ? NaN : v;
  } else if(fmt==='OCT'){
    if(tok.toLowerCase().startsWith('0o')) tok = tok.slice(2);
    const v = parseInt(tok,8);
    return Number.isNaN(v) ? NaN : v;
  } else { // DEC
    const v = parseInt(tok,10);
    return Number.isNaN(v) ? NaN : v;
  }
}

// UI 요소
const textIn = document.getElementById('textIn');
const convertTextBtn = document.getElementById('convertTextBtn');
const codeOut = document.getElementById('codeOut');
const formatSelect = document.getElementById('formatSelect');
const sepSelect = document.getElementById('sepSelect');
const copyCodeBtn = document.getElementById('copyCodeBtn');
const textToCodeInfo = document.getElementById('textToCodeInfo');
const textToCodeError = document.getElementById('textToCodeError');

const codeIn = document.getElementById('codeIn');
const inputFormat = document.getElementById('inputFormat');
const convertCodeBtn = document.getElementById('convertCodeBtn');
const textOut = document.getElementById('textOut');
const copyTextBtn = document.getElementById('copyTextBtn');
const codeToTextError = document.getElementById('codeToTextError');
const codeToTextInfo = document.getElementById('codeToTextInfo');

// 구분자 매핑
function getSeparatorType(type){
  if(type==='space') return ' ';
  if(type==='comma') return ',';
  if(type==='hyphen') return '-';
  if(type==='newline') return '\n';
  return ' ';
}

// 문자를 코드로 변환
convertTextBtn.addEventListener('click', ()=>{
  textToCodeError.textContent = '';
  const text = textIn.value || '';
  if(text.length===0){
    textToCodeError.textContent = '변환할 문자를 입력하세요.';
    codeOut.textContent = '';
    textToCodeInfo.textContent = '';
    return;
  }
  const fmt = formatSelect.value;
  const sep = getSeparatorType(sepSelect.value);
  const arr = [];
  for(let i=0;i<text.length;i++){
    const code = text.charCodeAt(i);
    if(code < 0 || code > 127){
      textToCodeError.textContent = '입력한 문자열에 ASCII 범위(0-127)를 벗어나는 문자가 있습니다: ' + text[i];
      codeOut.textContent = '';
      textToCodeInfo.textContent = '';
      return;
    }
    arr.push(formatNum(code,fmt));
  }
  const out = arr.join(sep);
  codeOut.textContent = out;
  textToCodeInfo.textContent = `문자 ${text.length}개 → 코드 ${arr.length}개 (포맷: ${fmt})`;
});

// 코드들을 문자로 변환
convertCodeBtn.addEventListener('click', ()=>{
  codeToTextError.textContent = '';
  const raw = codeIn.value || '';
  if(raw.trim().length===0){
    codeToTextError.textContent = '변환할 코드를 입력하세요.';
    textOut.textContent = '';
    codeToTextInfo.textContent = '';
    return;
  }
  const fmt = inputFormat.value;

  // 분리: 공백, 콤마, 세미콜론, 줄바꿈, 탭, 하이픈 등 허용
  const tokens = raw.split(/[\s,;|]+|[-]+/).filter(t => t.trim() !== '');
  const chars = [];
  const bad = [];
  for(let t of tokens){
    const num = parseTokenToNumber(t,fmt);
    if(Number.isNaN(num)){
      bad.push(t);
    } else if(num < 0 || num > 127){
      bad.push(t);
    } else {
      chars.push(String.fromCharCode(num));
    }
  }
  if(bad.length>0){
    codeToTextError.textContent = '잘못된 코드(또는 범위 벗어남): ' + bad.slice(0,8).join(', ');
    textOut.textContent = '';
    codeToTextInfo.textContent = '';
    return;
  }
  textOut.textContent = chars.join('');
  codeToTextInfo.textContent = `코드 ${tokens.length}개 → 문자 ${chars.length}개 (입력 포맷: ${fmt})`;
});

// 복사 버튼들
copyCodeBtn.addEventListener('click', async ()=>{
  const txt = codeOut.textContent || '';
  if(!txt){ textToCodeError.textContent = '복사할 코드가 없습니다.'; return; }
  try{ await navigator.clipboard.writeText(txt); textToCodeInfo.textContent = '코드가 클립보드에 복사되었습니다.'; }
  catch(e){ textToCodeError.textContent = '복사에 실패했습니다.'; }
});
copyTextBtn.addEventListener('click', async ()=>{
  const txt = textOut.textContent || '';
  if(!txt){ codeToTextError.textContent = '복사할 문자가 없습니다.'; return; }
  try{ await navigator.clipboard.writeText(txt); codeToTextInfo.textContent = '문자가 클립보드에 복사되었습니다.'; }
  catch(e){ codeToTextError.textContent = '복사에 실패했습니다.'; }
});

// 편의: Enter로도 변환 (텍스트 입력창에서 Ctrl+Enter)
textIn.addEventListener('keydown', (e)=>{
  if(e.key==='Enter' && (e.ctrlKey || e.metaKey)){
    convertTextBtn.click();
  }
});
codeIn.addEventListener('keydown', (e)=>{
  if(e.key==='Enter' && (e.ctrlKey || e.metaKey)){
    convertCodeBtn.click();
  }
});

// 작동 테스트용 기본값 세팅 (예시)
textIn.value = "Hello, ASCII!";
codeIn.value = "";
formatSelect.value = 'HEX';
inputFormat.value = 'HEX';

</script>
</body>
</html>
